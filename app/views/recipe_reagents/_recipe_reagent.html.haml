- model_name = 'recipe'
- if controller.respond_to?(:model_name)
  - model_name = controller.model_name

%tr
  %td.id= recipe_reagent.reagent.item.item_id
  %td.name
    = display_item recipe_reagent.reagent.item
  %td.price= format_currency(recipe_reagent.reagent.production_cost)
  %td.source= recipe_reagent.reagent.item_sources.join(', ')
  %td.quantity= format_quantity(recipe_reagent.quantity)
  %td.sum= format_currency(recipe_reagent.production_cost)
  %td.delete
    = link_to '&times;'.html_safe, '#', :'data-remove-recipe-reagent' => true
    - reagent_id = element_id_for_recipe_reagent(recipe_reagent)
    - unless recipe_reagent.new_record?
      = hidden_field_tag "#{model_name}[reagents_attributes][#{reagent_id}][id]", recipe_reagent.id, :'data-recipe-reagent-id' => true
    = hidden_field_tag "#{model_name}[reagents_attributes][#{reagent_id}][reagent_id]", recipe_reagent.reagent.id
    = hidden_field_tag "#{model_name}[reagents_attributes][#{reagent_id}][quantity]", recipe_reagent.quantity
